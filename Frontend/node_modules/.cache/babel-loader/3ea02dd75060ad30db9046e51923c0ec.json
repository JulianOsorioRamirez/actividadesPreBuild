{"ast":null,"code":"import _objectSpread from \"C:/Users/juria/OneDrive/Escritorio/Alehop/CodigoFuente/PruebaDespliegueAzure/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\juria\\\\OneDrive\\\\Escritorio\\\\Alehop\\\\CodigoFuente\\\\PruebaDespliegueAzure\\\\Frontend\\\\src\\\\screens\\\\control-panel\\\\Catalog\\\\Profile\\\\ProfileListScreen\\\\components\\\\DeleteModal\\\\DeleteProfileModal.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { format } from 'date-fns';\nimport DeleteActionModal from 'components/ReactTableActions/Delete/DeleteActionModal';\nimport ActiveAndDesactiveActionModal from 'components/ReactTableActions/ActiveAndDesactive/ActiveAndDesactiveActionModal';\nimport { deleteProfile, profileUpdateInfo } from 'redux/actions/profileActions';\nimport { USER_LIST_BY_PROFILE_ID_RESET } from 'redux/constants/userConstants';\nimport { PROFILE_LIST_RESET, PROFILE_DELETE_RESET, PROFILE_UPDATE_RESET } from 'redux/constants/profileConstants';\nimport { getUsersByProfileId } from 'redux/actions/userActions';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar DeleteProfileModal = function DeleteProfileModal(_ref) {\n  _s();\n\n  var handleCloseDeleteProfileModal = _ref.handleCloseDeleteProfileModal,\n      deleteProfileModal = _ref.deleteProfileModal,\n      showDeleteProfileInfo = _ref.showDeleteProfileInfo;\n  var dispatch = useDispatch();\n  var active = showDeleteProfileInfo.activo !== 'SI';\n\n  var _useSelector = useSelector(function (state) {\n    return state.profileDelete;\n  }),\n      successProfileDelete = _useSelector.successProfileDelete,\n      errorProfileDelete = _useSelector.errorProfileDelete,\n      loadingProfileDelete = _useSelector.loadingProfileDelete;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.userListByProfileId;\n  }),\n      loadingUserListByProfileId = _useSelector2.loadingUserListByProfileId,\n      userListByProfileIdData = _useSelector2.userListByProfileIdData;\n\n  var _useSelector3 = useSelector(function (state) {\n    return state.profileUpdate;\n  }),\n      loadingProfileUpdate = _useSelector3.loadingProfileUpdate,\n      errorProfileUpdate = _useSelector3.errorProfileUpdate,\n      successProfileUpdate = _useSelector3.successProfileUpdate;\n\n  useEffect(function () {\n    var timeOut = '';\n\n    if (successProfileUpdate) {\n      dispatch({\n        type: PROFILE_LIST_RESET\n      });\n      timeOut = setTimeout(function () {\n        dispatch({\n          type: PROFILE_UPDATE_RESET\n        });\n        handleCloseDeleteProfileModal();\n      }, 1000);\n    }\n\n    return function () {\n      return clearTimeout(timeOut);\n    };\n  }, [successProfileUpdate]);\n  useEffect(function () {\n    dispatch(getUsersByProfileId(showDeleteProfileInfo.id_perfil));\n  }, []);\n  useEffect(function () {\n    var timeOut = '';\n\n    if (successProfileDelete) {\n      timeOut = setTimeout(function () {\n        dispatch({\n          type: PROFILE_LIST_RESET\n        });\n        dispatch({\n          type: PROFILE_DELETE_RESET\n        });\n        handleCloseDeleteProfileModal();\n      }, 1000);\n    }\n\n    return function () {\n      return clearTimeout(timeOut);\n    };\n  }, [successProfileDelete]);\n  useEffect(function () {\n    return function () {\n      return dispatch({\n        type: PROFILE_DELETE_RESET\n      });\n    };\n  }, [dispatch]);\n  useEffect(function () {\n    return function () {\n      return dispatch({\n        type: PROFILE_UPDATE_RESET\n      });\n    };\n  }, [dispatch]);\n  useEffect(function () {\n    return function () {\n      return dispatch({\n        type: USER_LIST_BY_PROFILE_ID_RESET\n      });\n    };\n  }, [dispatch]);\n\n  var handleDeleteProfile = function handleDeleteProfile(e) {\n    e.preventDefault();\n    dispatch(deleteProfile(showDeleteProfileInfo === null || showDeleteProfileInfo === void 0 ? void 0 : showDeleteProfileInfo.id_perfil));\n  };\n\n  var Desactive = function Desactive(e) {\n    e.preventDefault();\n\n    if (active) {\n      dispatch(profileUpdateInfo(_objectSpread(_objectSpread({}, showDeleteProfileInfo), {}, {\n        activo: 'SI'\n      })));\n      return;\n    }\n\n    dispatch(profileUpdateInfo(_objectSpread(_objectSpread({}, showDeleteProfileInfo), {}, {\n      activo: 'NO',\n      fecha_baja: format(new Date(), 'yyyy-MM-dd')\n    })));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loadingUserListByProfileId ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"Cargando Perfil\"\n    }, void 0, false) : userListByProfileIdData && userListByProfileIdData.length > 0 ? /*#__PURE__*/_jsxDEV(ActiveAndDesactiveActionModal, {\n      open: deleteProfileModal,\n      handleCloseModal: handleCloseDeleteProfileModal,\n      handleSubmit: Desactive,\n      message: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"El perfil \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: showDeleteProfileInfo.codigo_perfil\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, _this), \" tiene asociados puestos de trabajo o gestores y solo puede \", active ? 'activar' : 'desactivar']\n      }, void 0, true),\n      modalTitle: \"\".concat(active ? 'Activar' : 'Desactivar', \" Perfil\"),\n      error: errorProfileUpdate,\n      success: successProfileUpdate,\n      loading: loadingProfileUpdate,\n      loadingMessageButton: active ? 'Activando...' : 'Desactivando',\n      succesMessageButton: active ? 'Activar' : 'Desactivar'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, _this) : /*#__PURE__*/_jsxDEV(DeleteActionModal, {\n      open: deleteProfileModal,\n      handleCloseModal: handleCloseDeleteProfileModal,\n      handleSubmit: handleDeleteProfile,\n      modalTitle: \"Eliminar Perfil\",\n      showDeleteInfo: showDeleteProfileInfo === null || showDeleteProfileInfo === void 0 ? void 0 : showDeleteProfileInfo.codigo_perfil,\n      loadingDelete: loadingProfileDelete,\n      successDelete: successProfileDelete,\n      errorDelete: errorProfileDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false);\n};\n\n_s(DeleteProfileModal, \"urhobaOGB56cbPsB8g2vG5Fj444=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = DeleteProfileModal;\nexport default DeleteProfileModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteProfileModal\");","map":{"version":3,"sources":["C:/Users/juria/OneDrive/Escritorio/Alehop/CodigoFuente/PruebaDespliegueAzure/Frontend/src/screens/control-panel/Catalog/Profile/ProfileListScreen/components/DeleteModal/DeleteProfileModal.js"],"names":["useEffect","useDispatch","useSelector","format","DeleteActionModal","ActiveAndDesactiveActionModal","deleteProfile","profileUpdateInfo","USER_LIST_BY_PROFILE_ID_RESET","PROFILE_LIST_RESET","PROFILE_DELETE_RESET","PROFILE_UPDATE_RESET","getUsersByProfileId","DeleteProfileModal","handleCloseDeleteProfileModal","deleteProfileModal","showDeleteProfileInfo","dispatch","active","activo","state","profileDelete","successProfileDelete","errorProfileDelete","loadingProfileDelete","userListByProfileId","loadingUserListByProfileId","userListByProfileIdData","profileUpdate","loadingProfileUpdate","errorProfileUpdate","successProfileUpdate","timeOut","type","setTimeout","clearTimeout","id_perfil","handleDeleteProfile","e","preventDefault","Desactive","fecha_baja","Date","length","codigo_perfil"],"mappings":"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","sourcesContent":["import { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { format } from 'date-fns'\r\nimport DeleteActionModal from 'components/ReactTableActions/Delete/DeleteActionModal'\r\nimport ActiveAndDesactiveActionModal from 'components/ReactTableActions/ActiveAndDesactive/ActiveAndDesactiveActionModal'\r\nimport { deleteProfile, profileUpdateInfo } from 'redux/actions/profileActions'\r\nimport { USER_LIST_BY_PROFILE_ID_RESET } from 'redux/constants/userConstants'\r\nimport { PROFILE_LIST_RESET, PROFILE_DELETE_RESET, PROFILE_UPDATE_RESET } from 'redux/constants/profileConstants'\r\nimport { getUsersByProfileId } from 'redux/actions/userActions'\r\n\r\nconst DeleteProfileModal = ({ handleCloseDeleteProfileModal, deleteProfileModal, showDeleteProfileInfo }) => {\r\n  const dispatch = useDispatch()\r\n  const active = showDeleteProfileInfo.activo !== 'SI'\r\n\r\n  const { successProfileDelete, errorProfileDelete, loadingProfileDelete } = useSelector((state) => state.profileDelete)\r\n  const { loadingUserListByProfileId, userListByProfileIdData } = useSelector((state) => state.userListByProfileId)\r\n  const { loadingProfileUpdate, errorProfileUpdate, successProfileUpdate } = useSelector((state) => state.profileUpdate)\r\n\r\n  useEffect(() => {\r\n    let timeOut = ''\r\n    if (successProfileUpdate) {\r\n      dispatch({ type: PROFILE_LIST_RESET })\r\n      timeOut = setTimeout(() => {\r\n        dispatch({ type: PROFILE_UPDATE_RESET })\r\n        handleCloseDeleteProfileModal()\r\n      }, 1000)\r\n    }\r\n\r\n    return () => clearTimeout(timeOut)\r\n  }, [successProfileUpdate])\r\n\r\n  useEffect(() => {\r\n    dispatch(getUsersByProfileId(showDeleteProfileInfo.id_perfil))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    let timeOut = ''\r\n    if (successProfileDelete) {\r\n      timeOut = setTimeout(() => {\r\n        dispatch({ type: PROFILE_LIST_RESET })\r\n        dispatch({ type: PROFILE_DELETE_RESET })\r\n        handleCloseDeleteProfileModal()\r\n      }, 1000)\r\n    }\r\n    return () => clearTimeout(timeOut)\r\n  }, [successProfileDelete])\r\n\r\n  useEffect(() => {\r\n    return () => dispatch({ type: PROFILE_DELETE_RESET })\r\n  }, [dispatch])\r\n  useEffect(() => {\r\n    return () => dispatch({ type: PROFILE_UPDATE_RESET })\r\n  }, [dispatch])\r\n  useEffect(() => {\r\n    return () => dispatch({ type: USER_LIST_BY_PROFILE_ID_RESET })\r\n  }, [dispatch])\r\n\r\n  const handleDeleteProfile = (e) => {\r\n    e.preventDefault()\r\n    dispatch(deleteProfile(showDeleteProfileInfo?.id_perfil))\r\n  }\r\n\r\n  const Desactive = (e) => {\r\n    e.preventDefault()\r\n    if (active) {\r\n      dispatch(profileUpdateInfo({ ...showDeleteProfileInfo, activo: 'SI' }))\r\n      return\r\n    }\r\n    dispatch(\r\n      profileUpdateInfo({ ...showDeleteProfileInfo, activo: 'NO', fecha_baja: format(new Date(), 'yyyy-MM-dd') })\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loadingUserListByProfileId ? (\r\n        <>Cargando Perfil</>\r\n      ) : userListByProfileIdData && userListByProfileIdData.length > 0 ? (\r\n        <ActiveAndDesactiveActionModal\r\n          open={deleteProfileModal}\r\n          handleCloseModal={handleCloseDeleteProfileModal}\r\n          handleSubmit={Desactive}\r\n          message={\r\n            <>\r\n              El perfil <strong>{showDeleteProfileInfo.codigo_perfil}</strong> tiene asociados puestos de trabajo o gestores y solo\r\n              puede {active ? 'activar' : 'desactivar'}\r\n            </>\r\n          }\r\n          modalTitle={`${active ? 'Activar' : 'Desactivar'} Perfil`}\r\n          error={errorProfileUpdate}\r\n          success={successProfileUpdate}\r\n          loading={loadingProfileUpdate}\r\n          loadingMessageButton={active ? 'Activando...' : 'Desactivando'}\r\n          succesMessageButton={active ? 'Activar' : 'Desactivar'}\r\n        />\r\n      ) : (\r\n        <DeleteActionModal\r\n          open={deleteProfileModal}\r\n          handleCloseModal={handleCloseDeleteProfileModal}\r\n          handleSubmit={handleDeleteProfile}\r\n          modalTitle='Eliminar Perfil'\r\n          showDeleteInfo={showDeleteProfileInfo?.codigo_perfil}\r\n          loadingDelete={loadingProfileDelete}\r\n          successDelete={successProfileDelete}\r\n          errorDelete={errorProfileDelete}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default DeleteProfileModal\r\n"]},"metadata":{},"sourceType":"module"}