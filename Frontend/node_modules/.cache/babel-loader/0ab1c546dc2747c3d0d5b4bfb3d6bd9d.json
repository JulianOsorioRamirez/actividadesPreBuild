{"ast":null,"code":"import _slicedToArray from \"C:/Users/juria/OneDrive/Escritorio/Alehop/CodigoFuente/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\juria\\\\OneDrive\\\\Escritorio\\\\Alehop\\\\CodigoFuente\\\\Frontend\\\\src\\\\screens\\\\control-panel\\\\DashboardScreen\\\\components\\\\UnidadMultiSelect.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core';\nimport GridItem from 'components/Grid/GridItem';\nimport MultiSelectUnits from 'components/MultiSelectUnits/MultiSelectUnits';\nimport { UNIT_LIST_RESET } from 'redux/constants/unitConstants';\nimport { getUnits, getUnitsRelated } from 'redux/actions/unitActions';\nimport styles from '../styles/multiSelectStyles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar useStyles = makeStyles(styles);\n\nvar UnidadMultiSelect = function UnidadMultiSelect(_ref) {\n  _s();\n\n  var unidadesData = _ref.unidadesData,\n      setUnidadesData = _ref.setUnidadesData,\n      _ref$relatedPositions = _ref.relatedPositions,\n      relatedPositions = _ref$relatedPositions === void 0 ? false : _ref$relatedPositions;\n  var classes = useStyles();\n  var dispatch = useDispatch();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.unitList;\n  }),\n      successUnitList = _useSelector.successUnitList,\n      units = _useSelector.units;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.unitRelatedList;\n  }),\n      successUnitRelatedList = _useSelector2.successUnitRelatedList,\n      unitsRelated = _useSelector2.unitsRelated;\n\n  useEffect(function () {\n    return function () {\n      return dispatch({\n        type: UNIT_LIST_RESET\n      });\n    };\n  }, [dispatch]);\n  useEffect(function () {\n    if (relatedPositions) return;\n\n    if (!successUnitList) {\n      dispatch(getUnits());\n    } else {\n      var filteredProfiles = units.filter(function (p) {\n        return p.codigo_unidad !== '';\n      });\n      setData(filteredProfiles);\n    }\n  }, [successUnitList]);\n  useEffect(function () {\n    if (!relatedPositions) return;\n\n    if (!successUnitRelatedList) {\n      dispatch(getUnitsRelated());\n    } else {\n      var filteredProfiles = unitsRelated.filter(function (p) {\n        return p.codigo_unidad !== '';\n      });\n      setData(filteredProfiles);\n    }\n  }, [successUnitRelatedList]);\n\n  var handleChangeMultiData = function handleChangeMultiData(event) {\n    var value = event.target.value;\n\n    if (unidadesData.map(function (unidad) {\n      return unidad.id_unidad;\n    }).indexOf(value[value.length - 1].id_unidad) === -1) {\n      setUnidadesData(value);\n    } else {\n      setUnidadesData(unidadesData.filter(function (unidad) {\n        var _value;\n\n        return unidad.id_unidad !== ((_value = value[value.length - 1]) === null || _value === void 0 ? void 0 : _value.id_unidad);\n      }));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(GridItem, {\n    xs: 12,\n    children: /*#__PURE__*/_jsxDEV(MultiSelectUnits, {\n      label: 'Unidades',\n      data: data,\n      multiData: unidadesData,\n      handleChangeMultiData: handleChangeMultiData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 10\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 7\n  }, _this);\n};\n\n_s(UnidadMultiSelect, \"QPmvhmXx62AM4XFjs99VcRTNlZk=\", false, function () {\n  return [useStyles, useDispatch, useSelector, useSelector];\n});\n\n_c = UnidadMultiSelect;\nexport default UnidadMultiSelect;\n\nvar _c;\n\n$RefreshReg$(_c, \"UnidadMultiSelect\");","map":{"version":3,"sources":["C:/Users/juria/OneDrive/Escritorio/Alehop/CodigoFuente/Frontend/src/screens/control-panel/DashboardScreen/components/UnidadMultiSelect.js"],"names":["useState","useEffect","useDispatch","useSelector","makeStyles","GridItem","MultiSelectUnits","UNIT_LIST_RESET","getUnits","getUnitsRelated","styles","useStyles","UnidadMultiSelect","unidadesData","setUnidadesData","relatedPositions","classes","dispatch","data","setData","state","unitList","successUnitList","units","unitRelatedList","successUnitRelatedList","unitsRelated","type","filteredProfiles","filter","p","codigo_unidad","handleChangeMultiData","event","value","target","map","unidad","id_unidad","indexOf","length"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport GridItem from 'components/Grid/GridItem'\r\nimport MultiSelectUnits from 'components/MultiSelectUnits/MultiSelectUnits'\r\nimport { UNIT_LIST_RESET } from 'redux/constants/unitConstants'\r\nimport { getUnits, getUnitsRelated } from 'redux/actions/unitActions'\r\nimport styles from '../styles/multiSelectStyles'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst UnidadMultiSelect = ({ unidadesData, setUnidadesData, relatedPositions = false }) => {\r\n   const classes = useStyles()\r\n   const dispatch = useDispatch()\r\n   const [data, setData] = useState([])\r\n\r\n   const { successUnitList, units } = useSelector(\r\n      (state) => state.unitList\r\n   )\r\n\r\n   const { successUnitRelatedList, unitsRelated } = useSelector(\r\n      (state) => state.unitRelatedList\r\n   )\r\n\r\n   useEffect(() => {\r\n      return () => dispatch({ type: UNIT_LIST_RESET })\r\n   }, [dispatch])\r\n\r\n   useEffect(() => {\r\n      if ( relatedPositions ) return\r\n\r\n      if (!successUnitList) {\r\n         dispatch(getUnits())\r\n      } else {\r\n         const filteredProfiles = units.filter((p) => p.codigo_unidad !== '')\r\n         setData(filteredProfiles)\r\n      }\r\n   }, [successUnitList])\r\n\r\n   useEffect(() => {\r\n      if ( !relatedPositions ) return\r\n\r\n      if (!successUnitRelatedList) {\r\n         dispatch(getUnitsRelated())\r\n      } else {\r\n         const filteredProfiles = unitsRelated.filter((p) => p.codigo_unidad !== '')\r\n         setData(filteredProfiles)\r\n      }\r\n   }, [successUnitRelatedList])\r\n\r\n   const handleChangeMultiData = (event) => {\r\n      const {\r\n         target: { value },\r\n      } = event\r\n      if (unidadesData.map((unidad) => unidad.id_unidad).indexOf(value[value.length - 1].id_unidad) === -1) {\r\n         setUnidadesData(value)\r\n      } else {\r\n         setUnidadesData(unidadesData.filter((unidad) => unidad.id_unidad !== value[value.length - 1]?.id_unidad))\r\n      }\r\n   }\r\n\r\n   return (\r\n      <GridItem xs={12}>\r\n         <MultiSelectUnits\r\n         label={'Unidades'}\r\n         data={data}\r\n         multiData={unidadesData}\r\n         handleChangeMultiData={handleChangeMultiData}\r\n         />\r\n      </GridItem>\r\n   )\r\n}\r\n\r\nexport default UnidadMultiSelect\r\n"]},"metadata":{},"sourceType":"module"}